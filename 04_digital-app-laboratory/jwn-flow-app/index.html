<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JWN Flow</title>
    <meta name="theme-color" content="#121212">
    <meta name="description" content="Platform produktivitas pribadi untuk menjaga flow dan konsistensi harian.">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header Section -->
        <header>
            <div class="header-top">
                <div class="logo">
                    <img src="logo.jpg" alt="Logo" class="user-logo-img">
                    <h1>JWN FLOW</h1>
                </div>
                <div class="streak-badge">
                    <i class="fa-solid fa-fire"></i>
                    <span id="streak-count">0</span> Hari
                </div>
            </div>

            <div class="progress-card">
                <div class="progress-text">
                    <span id="progress-greeting">Halo, Calon Pemenang</span>
                    <h2 id="level-title">Level 1: Beginner</h2>
                </div>
                <div class="progress-circle" id="daily-progress-circle">
                    <span id="daily-percent">0%</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content">
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('habits')">Habits</button>
                <button class="tab-btn" onclick="switchTab('todo')">To-Do</button>
                <button class="tab-btn" onclick="switchTab('plan')">My Plan</button>
                <button class="tab-btn" onclick="switchTab('journal')">Jurnal</button>
                <button class="tab-btn" onclick="switchTab('calendar')">Kalender</button>
            </div>

            <!-- Habits View -->
            <div id="view-habits" class="view-section active">
                <div class="date-display">
                    <h3 id="current-date">Senin, 25 Des</h3>
                </div>

                <div class="habit-list" id="habit-list">
                    <!-- Habits inserted by JS -->
                </div>
            </div>

            <!-- To-Do View -->
            <div id="view-todo" class="view-section">
                <div class="journal-entry" style="display:flex; gap:10px; margin-bottom:15px;">
                    <input type="text" id="todo-input" placeholder="Tambah tugas baru..."
                        style="flex:1; padding:12px; border-radius:12px; border:1px solid #333; background:var(--surface-color); color:white;">
                    <button class="action-btn" onclick="addTodo()" style="width:auto; padding:0 20px;">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>
                <div class="habit-list" id="todo-list">
                    <!-- Todos inserted by JS -->
                </div>
            </div>

            <!-- Calendar View -->
            <div id="view-calendar" class="view-section">
                <div class="calendar-header">
                    <button onclick="changeMonth(-1)"><i class="fa-solid fa-chevron-left"></i></button>
                    <h3 id="calendar-month-year">Desember 2025</h3>
                    <button onclick="changeMonth(1)"><i class="fa-solid fa-chevron-right"></i></button>
                </div>

                <!-- Monthly Target Input -->
                <div class="monthly-target-box">
                    <label><i class="fa-solid fa-bullseye"></i> Target Bulan Ini</label>
                    <textarea id="monthly-target-input"
                        placeholder="Apa fokus utama bulan ini? (Akan muncul di My Plan)"
                        onblur="saveMonthlyTarget()"></textarea>
                </div>

                <div class="calendar-days-header">
                    <span>M</span><span>S</span><span>S</span><span>R</span><span>K</span><span>J</span><span>S</span>
                </div>
                <div class="calendar-grid" id="calendar-grid">
                    <!-- Grid generated by JS -->
                </div>
            </div>

            <!-- Plan View -->
            <div id="view-plan" class="view-section">
                <!-- Dynamic Monthly Target Display -->
                <div class="plan-card" id="plan-monthly-target-card"
                    style="margin-bottom: 15px; border-color: var(--accent-color);">
                    <h3 style="color:var(--accent-color)"><i class="fa-solid fa-bullseye"></i> Target Bulan Ini</h3>
                    <div id="plan-monthly-target-text" class="placeholder-text">Belum ada target.</div>
                </div>

                <div class="plan-card">
                    <h3><i class="fa-solid fa-scroll"></i> Grand Plan</h3>
                    <div class="plan-content" id="user-plan-content">
                        <p class="placeholder-text">Please paste your plan content here...</p>
                    </div>
                </div>
            </div>

            <!-- Journal View -->
            <div id="view-journal" class="view-section">
                <div class="journal-entry">
                    <textarea id="journal-input"
                        placeholder="Apa yang kamu pelajari hari ini? Apa yang bisa ditingkatkan?"></textarea>
                    <button class="action-btn" onclick="saveJournal()">Simpan Catatan</button>
                </div>
                <div id="journal-history">
                    <!-- History -->
                </div>
            </div>
        </main>
    </div>

    <!-- Date Detail Modal -->
    <div id="date-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-date-title">25 Desember 2025</h3>
                <button onclick="closeModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <h4><i class="fa-solid fa-check-circle"></i> Tugas Selesai:</h4>
                <ul id="modal-task-list"></ul>

                <h4 style="margin-top:15px;"><i class="fa-solid fa-book"></i> Catatan/Jurnal:</h4>
                <div id="modal-journal-list"></div>
            </div>
        </div>
    </div>

    <!-- Notification/Toast -->
    <div id="toast" class="toast hidden">Semangat! Terus berproses.</div>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>

</html>